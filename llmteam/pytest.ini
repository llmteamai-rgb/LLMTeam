# Pytest configuration file
# This provides additional safety for memory-constrained environments

[pytest]
# Limit memory usage by running tests sequentially by default
# Use -n auto only when you have sufficient memory

# Stop after 5 failures to save resources
addopts = --maxfail=5

# Timeout individual tests to prevent hangs
timeout = 30
timeout_method = thread

# Don't run tests in random order (saves memory)
# Use --random-order only for thorough testing

# Filter warnings to reduce output
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Asyncio configuration
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Test markers
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (slower)
    slow: Slow tests
    memory_intensive: Tests using significant memory
